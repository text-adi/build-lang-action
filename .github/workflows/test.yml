name: Test

on:
  push:
    branches:
      - dev
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true


jobs:
  test:
    name: Test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Create file
        uses: "finnp/create-file-action@master"
        env:
          FILE_NAME: "src/file.po"
          FILE_DATA: ${{vars.TEMPLATE}}
      - run: |
          ls -la src
          tail src/file.po
          rm -rf src/file.mo
      - uses: text-adi/build-language-i18n-action@dev
      - name: Check Test
        run: |
          expected_files=("file.po" "file.mo")
          directory="./src/"
          for file in "${expected_files[@]}"; do
            if [[ ! -f "$directory/$file" ]]; then
              echo "File $file not fount" && exit 1
            fi
          done
